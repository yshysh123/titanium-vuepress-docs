(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{616:function(e,t,i){"use strict";i.r(t);var r=i(14),n=Object(r.a)({},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"titanium-android-service"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#titanium-android-service","aria-hidden":"true"}},[e._v("#")]),e._v(" Titanium.Android.Service")]),e._v(" "),i("ProxySummary"),e._v(" "),i("h2",{attrs:{id:"overview"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),i("p",[e._v("A service is a component started by an application that runs in the background. The service\ndoes not have any application UI associated with it, so the user does not directly interact\nwith it, only your application.")]),e._v(" "),i("p",[e._v("The Titanium SDK gives you the ability to write your own Android Services using JavaScript.\nThe service executes your JavaScript code at intervals you specify.  Note that the service\nmay stop running if the application is killed.")]),e._v(" "),i("p",[e._v("To create a service:")]),e._v(" "),i("ol",[i("li",[e._v("Write the JavaScript code you want the service to execute in a separate file.\nThe service can execute any Titanium APIs but you should only use non-UI APIs.")]),e._v(" "),i("li",[e._v("Register the service in your "),i("code",[e._v("tiapp.xml")]),e._v(" file. Refer to the example below.")]),e._v(" "),i("li",[e._v("Create a service intent by passing the JavaScript file to\nthe "),i("type-link",{attrs:{type:"Titanium.Android.createServiceIntent"}},[e._v("Titanium.Android.createServiceIntent")]),e._v(" method and set the interval to run the\ncode using the intent's "),i("code",[e._v("putExtra()")]),e._v(" method.")],1),e._v(" "),i("li",[e._v("Pass the Intent object to either the "),i("type-link",{attrs:{type:"Titanium.Android.createService"}},[e._v("Titanium.Android.createService")]),e._v(" method\nto create a "),i("code",[e._v("Service")]),e._v(" object ("),i("em",[e._v("bound service")]),e._v("), where the application can\nmanage the service by invoking methods and binding callbacks on the object,\nor to the "),i("type-link",{attrs:{type:"Titanium.Android.startService"}},[e._v("Titanium.Android.startService")]),e._v(" method to start the service ("),i("em",[e._v("started service")]),e._v(")\nand the service manages itself.")],1)]),e._v(" "),i("p",[e._v("Use the "),i("code",[e._v("Titanium.Android.Service")]),e._v(" API to manage the service.")]),e._v(" "),i("p",[e._v("To get a reference to the "),i("code",[e._v("Service")]),e._v(" inside the JavaScript service code, use the\n"),i("type-link",{attrs:{type:"Titanium.Android.currentService"}},[e._v("Titanium.Android.currentService")]),e._v(" property to retrieve a reference to the service,\nthen invoke the "),i("code",[e._v("Titanium.Android.Service")]),e._v(" APIs on the "),i("code",[e._v("Service")]),e._v(" object.")],1),e._v(" "),i("p",[e._v("Further Reading:")]),e._v(" "),i("ul",[i("li",[i("a",{attrs:{href:"https://docs.appcelerator.com/platform/latest/#!/guide/Android_Services",target:"_blank",rel:"noopener noreferrer"}},[e._v("Android Services guide"),i("OutboundLink")],1)]),e._v(" "),i("li",[i("a",{attrs:{href:"https://developer.android.com/reference/android/app/Service.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Android Developer: Service"),i("OutboundLink")],1)])]),e._v(" "),i("h2",{attrs:{id:"examples"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[e._v("#")]),e._v(" Examples")]),e._v(" "),i("h3",{attrs:{id:"hello-world-service"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#hello-world-service","aria-hidden":"true"}},[e._v("#")]),e._v(" Hello World Service")]),e._v(" "),i("p",[e._v("This example shows how to create a service in JavaScript.\nYour service code is included in its own JavaScript file.")]),e._v(" "),i("p",[e._v("In this example, the service reads data from the "),i("type-link",{attrs:{type:"Titanium.Android.Intent"}},[e._v("Titanium.Android.Intent")]),e._v(' which created it,\nto see what it should say besides "Hello World".')],1),e._v(" "),i("p",[e._v("File: myservice.js:")]),e._v(" "),i("pre",[i("code",[e._v('var service = Titanium.Android.currentService;\nvar intent = service.intent;\nvar message = intent.getStringExtra("message_to_echo");\nTitanium.API.info("Hello World!  I am a Service.  I have this to say: " + message);\n')])]),e._v(" "),i("p",[e._v("Register the service in tiapp.xml:")]),e._v(" "),i("pre",[i("code",[e._v('<ti:app>\n    <android xmlns:android="http://schemas.android.com/apk/res/android">\n        <services>\n            <service url="myservice.js" type="interval"/>\n        </services>\n    </android>\n</ti:app>\n')])]),e._v(" "),i("p",[e._v('Code in "regular" Titanium file to launch the service and listen for pause/resume events.\nCode also stops the service after its code runs 3 times.')]),e._v(" "),i("pre",[i("code",[e._v("var intent = Titanium.Android.createServiceIntent( { url: 'myservice.js' } );\n// Service should run its code every 2 seconds.\nintent.putExtra('interval', 2000);\n// A message that the service should 'echo'\nintent.putExtra('message_to_echo', 'Titanium rocks!');\n\nvar service = Titanium.Android.createService(intent);\nservice.addEventListener('resume', function(e) {\n    Titanium.API.info('Service code resumes, iteration ' + e.iteration);\n});\nservice.addEventListener('pause', function(e) {\n    Titanium.API.info('Service code pauses, iteration ' + e.iteration);\n    if (e.iteration === 3) {\n        Titanium.API.info('Service code has run 3 times, will now stop it.');\n        service.stop();\n    }\n});\nservice.start();\n")])]),e._v(" "),i("p",[e._v("Console Output:")]),e._v(" "),i("pre",[i("code",[e._v("[INFO] [29,1942] Service code resumes, iteration 1\n[INFO] [70,2029] Hello World! I am a Service. I have this to say: Titanium rocks!\n[INFO] [3,2070] Service code pauses, iteration 1\n[INFO] [2,3915] Service code resumes, iteration 2\n[INFO] [31,3961] Hello World! I am a Service. I have this to say: Titanium rocks!\n[INFO] [5,3968] Service code pauses, iteration 2\n[INFO] [2,5917] Service code resumes, iteration 3\n[INFO] [27,5961] Hello World! I am a Service. I have this to say: Titanium rocks!\n[INFO] [16,5980] Service code pauses, iteration 3\n[INFO] [1,5981] Service code has run 3 times, will now stop it.\n")])]),e._v(" "),i("ApiDocs")],1)},[],!1,null,null,null);n.options.__file="service.md";t.default=n.exports}}]);
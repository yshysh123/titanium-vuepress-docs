(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{634:function(t,e,i){"use strict";i.r(e);var n=i(14),a=Object(n.a)({},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h1",{attrs:{id:"titanium-app-ios-useractivity"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#titanium-app-ios-useractivity","aria-hidden":"true"}},[t._v("#")]),t._v(" Titanium.App.iOS.UserActivity")]),t._v(" "),i("ProxySummary"),t._v(" "),i("h2",{attrs:{id:"overview"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),i("p",[t._v("A UserActivity object requires the "),i("code",[t._v("activityType")]),t._v(" property to be specified at creation time.\nAdditional properties can be set either at creation or set individually after creation.")]),t._v(" "),i("p",[t._v("Handoff will not work in the simulator.  You must build and run on a compatible device.")]),t._v(" "),i("p",[t._v("Handoff functionality depends on a few things:")]),t._v(" "),i("ul",[i("li",[t._v("You must be logged into the same iCloud account on each device you wish to use Handoff.")]),t._v(" "),i("li",[t._v("Handoff broadcasts activities via Bluetooth LE signals, so both the broadcasting and receiving devices must have Bluetooth LE 4.0 support.")]),t._v(" "),i("li",[t._v("Connect all devices to the same Wi-Fi network.")])]),t._v(" "),i("p",[t._v("Make sure you have two devices that are logged onto the same iCloud account.")]),t._v(" "),i("p",[t._v("Since iOS 12, you can also configure the UserActivity API for handling Siri Shortcuts. See the\nbelow API's and example or refer to the "),i("a",{attrs:{href:"https://developer.apple.com/documentation/sirikit/donating_shortcuts?language=objc",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apple Siri Shortcuts Docs"),i("OutboundLink")],1),t._v("\nfor details.")]),t._v(" "),i("h2",{attrs:{id:"examples"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),i("h3",{attrs:{id:"creating-a-new-user-activity"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-new-user-activity","aria-hidden":"true"}},[t._v("#")]),t._v(" Creating a new User Activity")]),t._v(" "),i("p",[t._v("The following example demonstrates how to create a new UserActivity and mark the activity as\nthe current activity Handoff should be using when switching between devices.")]),t._v(" "),i("p",[t._v("It is important to note that all activityTypes must be defined in your "),i("code",[t._v("tiapp.xml")]),t._v(" before this\nfeature can be supported.  It is important to check the supported property on your UserActivity\nto ensure the activity created is supported on your device.")]),t._v(" "),i("h4",{attrs:{id:"app-js"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#app-js","aria-hidden":"true"}},[t._v("#")]),t._v(" app.js")]),t._v(" "),i("pre",[i("code",[t._v("var activity =  Ti.App.iOS.createUserActivity({\nactivityType: 'com.setdirection.home',\n    title: 'activity 1',\n    userInfo: {\n        msg: 'hello world'\n    }\n});\n\nif (!activity.isSupported()) {\n    alert('User Activities are not supported on this device!');\n} else {\n    activity.becomeCurrent();\n\n    Ti.App.iOS.addEventListener('continueactivity', function (e) {\n        if (e.activityType === 'com.setdirection.home' && e.userInfo.msg) {\n            alert(e.userInfo.msg);\n        }\n    });\n}\n")])]),t._v(" "),i("h4",{attrs:{id:"tiapp-xml"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#tiapp-xml","aria-hidden":"true"}},[t._v("#")]),t._v(" tiapp.xml")]),t._v(" "),i("pre",[i("code",[t._v("<ti:app>\n  <ios>\n    <plist>\n      <dict>\n        <key>NSUserActivityTypes</key>\n        <array>\n          <string>com.setdirection.home</string>\n        </array>\n      </dict>\n    </plist>\n  </ios>\n</ti:app>\n")])]),t._v(" "),i("h3",{attrs:{id:"ios-12-siri-shortcuts"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#ios-12-siri-shortcuts","aria-hidden":"true"}},[t._v("#")]),t._v(" iOS 12+ Siri Shortcuts")]),t._v(" "),i("p",[t._v("The following example shows how to add and delete a UserActivity for Siri Shortcuts\non iOS 12 and later.")]),t._v(" "),i("h4",{attrs:{id:"app-js-2"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#app-js-2","aria-hidden":"true"}},[t._v("#")]),t._v(" app.js")]),t._v(" "),i("pre",[i("code",[t._v("var win = Ti.UI.createWindow({\n    backgroundColor: '#fff'\n});\n\nvar btn = Ti.UI.createButton({\n    top: 200,\n    title: 'Delete UserActivity'\n});\n\nvar itemAttr = Ti.App.iOS.createSearchableItemAttributeSet({\n    itemContentType: Ti.App.iOS.UTTYPE_IMAGE,\n    title: 'Titanium Siri Shortcut Tutorial',\n    contentDescription: 'Tech Example \\nOn: ' + (new Date().toLocaleString()),\n});\n\nvar activity = Ti.App.iOS.createUserActivity({\n    activityType: 'com.appcelerator.titanium',\n    title: 'Siri shortcut activity',\n    userInfo: {\n        msg: 'hello world'\n    },\n    eligibleForSearch: true,\n    eligibleForPrediction: true,\n    persistentIdentifier: 'titanium_siri_identifier'\n});\n\nactivity.addContentAttributeSet(itemAttr);\n\nif (!activity.isSupported()) {\n    alert('User Activities are not supported on this device!');\n} else {\n    activity.becomeCurrent();\n\n    Ti.App.iOS.addEventListener('continueactivity', function (e) {\n        Ti.API.info('continueactivity called');\n        if (e.activityType === 'com.appcelerator.titanium' && e.userInfo.msg) {\n            alert(e.userInfo.msg);\n        }\n    });\n}\n\nactivity.addEventListener('useractivitydeleted', function (e) {\n    Ti.API.info('useractivitydeleted called');\n    alert('user activity deleted');\n});\n\nbtn.addEventListener('click', function () {\n    activity.deleteSavedUserActivitiesForPersistentIdentifiers(['titanium_siri_identifier']);\n});\n\nwin.add(btn);\nwin.open();\n")])]),t._v(" "),i("ApiDocs")],1)},[],!1,null,null,null);a.options.__file="useractivity.md";e.default=a.exports}}]);
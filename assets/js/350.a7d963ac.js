(window.webpackJsonp=window.webpackJsonp||[]).push([[350],{492:function(e,t,n){"use strict";n.r(t);var i=n(14),a=Object(i.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"titanium-ui-ios-documentviewer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#titanium-ui-ios-documentviewer","aria-hidden":"true"}},[e._v("#")]),e._v(" Titanium.UI.iOS.DocumentViewer")]),e._v(" "),n("ProxySummary"),e._v(" "),n("h2",{attrs:{id:"overview"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),n("p",[e._v("The DocumentViewer is created by the "),n("type-link",{attrs:{type:"Titanium.UI.iOS.createDocumentViewer"}},[e._v("Titanium.UI.iOS.createDocumentViewer")]),e._v(" method.")],1),e._v(" "),n("p",[e._v("Use this class to present an user interface for previewing files,\nsuch as an e-mail program that previews attachments.")]),e._v(" "),n("p",[e._v("The DocumentViewer displays previews for the following document types:")]),e._v(" "),n("ul",[n("li",[e._v("Microsoft Office (DOC, XLS, PPT) (Office 97-2004), the XML versions are not supported")]),e._v(" "),n("li",[e._v("Portable Document Format files (PDF)")]),e._v(" "),n("li",[e._v("Images (JPEG, GIF, PNG)")]),e._v(" "),n("li",[e._v("Rich Text Format files (RTF)")]),e._v(" "),n("li",[e._v("HTML and XML files")]),e._v(" "),n("li",[e._v("Plain text files")]),e._v(" "),n("li",[e._v("Comma-separated value files (CSV)")])]),e._v(" "),n("p",[e._v("Note: Using HTML content in the DocumentViewer is not recommended, since it does not support\nall HTML-capabilities. Please use "),n("type-link",{attrs:{type:"Titanium.UI.WebView"}},[e._v("Titanium.UI.WebView")]),e._v(" to display complex HTML files.")],1),e._v(" "),n("p",[e._v("You can launch the document either in the document viewer or with another application with the\noptions menu. To use the options menu, you need to specify a view with the "),n("code",[e._v("show")]),e._v(" method to\nanchor the options menu to.")]),e._v(" "),n("p",[e._v("In the document viewer, click the "),n("strong",[e._v("Done")]),e._v(" button to dismiss the document viewer or click the\nright navigation button to open the options menu to perform another action with the document,\nsuch as printing the document or opening the document in another application.")]),e._v(" "),n("p",[n("strong",[e._v("Note for iOS 11 and later")]),e._v("\nWhen using the DocumentViewer in iOS 11 and later, documents need to be placed in the app-bundle\nin order to be shared to third-party apps. This is a privacy restriction and can be solved by\nusing either a document from the "),n("code",[e._v("Resources")]),e._v(" directory (classic Titanium) or "),n("code",[e._v("app/assets")]),e._v(" (Alloy).\nAlternatively, documents can also be stored in the "),n("type-link",{attrs:{type:"Titanium.Filesystem.applicationCacheDirectory"}},[e._v("Titanium.Filesystem.applicationCacheDirectory")]),e._v("\nor "),n("type-link",{attrs:{type:"Titanium.Filesystem.applicationDataDirectory"}},[e._v("Titanium.Filesystem.applicationDataDirectory")]),e._v(".")],1),e._v(" "),n("p",[n("strong",[e._v("Note for iOS 11.2 and later")]),e._v("\nApple introduced a regression in iOS 11.2 that forces "),n("strong",[e._v("all")]),e._v(" files to be in the application data\ndirectory. We handle this workaround for you in Titanium SDK 7.0.2+, but you\ncan also work around it without an SDK update. Here is an example:")]),e._v(" "),n("pre",[n("code",[e._v("var fileName = 'example.pdf';\n\n// For iOS 11.2, workaround the Apple issue by creating a temporary file and\n// reference it. It will be removed from filesystem once the app closes.\n// Read more here: http://nshipster.com/nstemporarydirectory/\nif (isiOS11_2()) {\n  fileName = fileInApplicationDataDirectory(fileName);\n}\n\nvar docViewer = Ti.UI.iOS.createDocumentViewer({\n  url: fileName\n});\n\ndocViewer.show();\n\n// Check if the current device runs iOS 11.2+\nfunction isiOS11_2() {\n  var version = Ti.Platform.version.split(\".\");\n  return (parseInt(version[0]) >= 11 && parseInt(version[1]) >= 2);\n}\n\n// Create a temporary file with the contents of the old file\n// Expects the file to be in the resources directory. If you receive the file\n// from an API-call, receive pass the Ti.Blob/Ti.File/text to \"write\" directly.\nfunction fileInApplicationDataDirectory(fileName) {\n  var file = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, fileName);\n\n  if (!file.exists()) {\n    alert('File does not exist in resources!');\n    return;\n  }\n\n  var newFile = Titanium.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, fileName);\n  newFile.createFile();\n\n  if (!newFile.exists()) {\n    alert('New file could not be created in application data directory!');\n    return;\n  }\n\n  newFile.write(file);\n\n  return newFile.nativePath;\n}\n")])]),e._v(" "),n("p",[e._v("Read more about the issue in "),n("a",{attrs:{href:"https://jira.appcelerator.org/browse/TIMOB-25680",target:"_blank",rel:"noopener noreferrer"}},[e._v("TIMOB-25680"),n("OutboundLink")],1),e._v(".")]),e._v(" "),n("h2",{attrs:{id:"examples"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[e._v("#")]),e._v(" Examples")]),e._v(" "),n("h3",{attrs:{id:"document-viewer-example"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#document-viewer-example","aria-hidden":"true"}},[e._v("#")]),e._v(" Document Viewer Example")]),e._v(" "),n("p",[e._v("In the example below, the navigation bar's right button opens the options menu,\nwhile the window button immediately launches the document in the document viewer.")]),e._v(" "),n("pre",[n("code",[e._v("var navButton = Ti.UI.createButton({\n    title: 'Launch'\n});\n\nvar win = Ti.UI.createWindow({\n    rightNavButton: navButton\n});\n\nvar navWin = Ti.UI.createNavigationWindow({\n    window: win\n});\n\nvar winButton = Ti.UI.createButton({\n    title: 'Launch',\n    height: 40,\n    width: 200,\n    top: 270\n});\n\nwin.add(winButton);\n\n// Create a document viewer to preview a PDF file (\"Example.pdf\")\ndocViewer = Ti.UI.iOS.createDocumentViewer({\n    url: 'Example.pdf'\n});\n\n// Opens the options menu and when the user clicks on 'Quick Look'\n// the document viewer launches with an animated transition\nnavButton.addEventListener('click', function() {\n    docViewer.show({\n        view: navButton,\n        animated: true\n    });\n});\n\n// The document viewer immediately launches without an animation\nwinButton.addEventListener('click', function(){\n    docViewer.show()\n});\n\nnavWin.open();\n")])]),e._v(" "),n("ApiDocs")],1)},[],!1,null,null,null);a.options.__file="documentviewer.md";t.default=a.exports}}]);
{"name":"Titanium.Database","summary":"<p>The top-level <code>Database</code> module, used for creating and accessing the\nin-application SQLite database.</p>\n","deprecated":null,"events":[],"methods":[{"name":"install","deprecated":null,"summary":"<p>Installs an SQLite database to device's internal storage.</p>\n","description":"<p>Copies an SQLite database file to the device's internal storage (only) and\ncreates a persistent name that is available for the lifetime of the app.\nOn Android, if the source file does not exist, an empty database is created.</p>\n<p>Returns a reference to the opened database. If the destination file already\nexists, behaves as <a href=\"/titanium-vuepress-docs/api/titanium/database.html#open\">open</a>.</p>\n<p>This method is primarily used for iOS.</p>\n<p>With Android, as there is often minimal internal storage available, <code>install</code>\nmay only be appropriate for small databases or for prototyping. When database\nfiles are to be stored on external storage (for example, SD Card), a combination of\n<a href=\"/titanium-vuepress-docs/api/titanium/filesystem.html\">Titanium.Filesystem</a> and <a href=\"/titanium-vuepress-docs/api/titanium/database.html#open\">open</a> is required.</p>\n<p>With Titanium 1.8.0.1 on iOS, the default database location changed in accordance\nwith Apple's guidelines. If a database file already exists in the old\nlocation, <code>install</code> will automatically move it to the new location\nrather than copying the file from the path provided in the first\nargument.</p>\n<p>Files stored in the <code>Private Documents</code> directory on iOS5 will be\nautomatically backed up to iCloud and removed from the device in low\nstorage situations. See\n<a href=\"https://developer.apple.com/library/ios/qa/qa1719/_index.html\">How do I prevent files from being backed up to iCloud and iTunes?</a>\nfor details. To prevent this for database files, use the <a href=\"/titanium-vuepress-docs/api/titanium/database/db.html#file\">file</a>\nobject with the <a href=\"Titanium.Filesystem.File.setRemoteBackup\">Titanium.Filesystem.File.setRemoteBackup</a> method.</p>\n<p>Always <a href=\"/titanium-vuepress-docs/api/titanium/database/db.html#close\">close</a> the database after use.</p>\n","filename":"Titanium.Database.install-method","platforms":[{"pretty_name":"Android","since":"0.8","name":"android"},{"pretty_name":"iPhone","since":"0.8","name":"iphone"},{"pretty_name":"iPad","since":"0.8","name":"ipad"},{"pretty_name":"Windows","since":"4.1.0","name":"windowsphone"}],"inherits":null,"examples":"<h4 id=\"examples\"><a class=\"header-anchor\" href=\"#examples\" aria-hidden=\"true\">#</a> Examples</h4>\n<h5 id=\"install-a-database-ios\"><a class=\"header-anchor\" href=\"#install-a-database-ios\" aria-hidden=\"true\">#</a> Install a Database (iOS)</h5>\n<p>A database, with a filename of <code>mydb1</code> and located in the same directory as the\nthe running script, is installed.</p>\n<pre><code>var db1 = Ti.Database.install('mydb1', 'mydb1Installed');\n</code></pre>\n<p>The file is copied to the default database location with a file\nextension of <code>sql</code>.</p>\n<p><strong>On simulator</strong></p>\n<ul>\n<li><code>/Users/user_name/Library/Application Support/iPhone Simulator/ios_version/Applications/apple_app_id/Library/Private Documents/mydb1Installed.sql</code> (Titanium 1.8.0.1)</li>\n<li><code>/Users/user_name/Library/Application Support/iPhone Simulator/ios_version/Applications/apple_app_id/Library/Application Support/database/mydb1Installed.sql</code> (earlier versions)</li>\n</ul>\n<p><strong>On device</strong></p>\n<ul>\n<li><code>/Applications/apple_app_id/Library/Private Documents/mydb1Installed.sql</code> (Titanium 1.8.0.1)</li>\n<li><code>/Applications/apple_app_id/Library/Application Support/database/mydb1Installed.sql</code> (earlier versions)</li>\n</ul>\n<p>To prevent the database file being automatically backed up to iCloud, use <code>setRemoteBackup</code>.</p>\n<pre><code>db1.file.setRemoteBackup(false);\n</code></pre>\n<h5 id=\"install-a-database-to-internal-storage-android\"><a class=\"header-anchor\" href=\"#install-a-database-to-internal-storage-android\" aria-hidden=\"true\">#</a> Install a Database to Internal Storage (Android)</h5>\n<p>A database, with a filename of <code>mydb1</code> and located in the same directory as the\nthe running script, is installed.</p>\n<pre><code>var db1 = Ti.Database.install('mydb1', 'mydb1Installed');\n</code></pre>\n<p>Unlike on iOS, no file extension is added. The file is opened in the\nfollowing default database location, on both emulator and device.</p>\n<ul>\n<li><code>file:///data/data/appID/databases/mydb1Installed</code></li>\n</ul>\n<h5 id=\"install-a-database-to-external-storage-android\"><a class=\"header-anchor\" href=\"#install-a-database-to-external-storage-android\" aria-hidden=\"true\">#</a> Install a Database to External Storage (Android)</h5>\n<p>The device is checked for the presence of external storage and a\ndatabase, with a filename of <code>mydb2</code> and located in the same directory as the\nthe running script, is installed.</p>\n<pre><code>if (Ti.Platform.name === 'android' &amp;&amp; Ti.Filesystem.isExternalStoragePresent()) {\n  var db2 = Ti.Database.install('mydb2', Ti.Filesystem.externalStorageDirectory + 'path' + Ti.Filesystem.separator + 'to' + Ti.Filesystem.separator + 'mydb2Installed');\n}\n</code></pre>\n<p>Unlike on iOS, no file extension is added. The file is copied to the\nabsolute path provided.</p>\n<ul>\n<li><code>file:///sdcard/path/to/mydb2Installed</code></li>\n</ul>\n","parameters":[{"name":"path","deprecated":null,"summary":"Path and filename of the database file to copy to internal storage.\nFile location is relative to the script's context unless an absolute\npath, such as one constructed with a <Titanium.Filesystem> \nconstant, is used.\n","description":null,"type":"String","optional":false,"filename":"Titanium.Database.install-method.path-param"},{"name":"dbName","deprecated":null,"summary":"Destination filename or absolute path, which will subsequently be passed to\n<Titanium.Database.open>.\n","description":null,"type":"String","optional":false,"filename":"Titanium.Database.install-method.dbName-param"}],"returns":{"type":"Titanium.Database.DB"}},{"name":"open","deprecated":null,"summary":"<p>Opens an SQLite database.</p>\n","description":"<p>Opens an SQLite database and returns a reference to it. If the database does\nnot exist, creates an empty database file and returns a reference to this\nopened database.</p>\n<p>With Titanium 1.8.0.1 on iOS, the default database location changed in accordance\nwith Apple's guidelines. If a database file already exists in the old\nlocation, <code>open</code> will automatically move it to the new location.</p>\n<p>Always <a href=\"/titanium-vuepress-docs/api/titanium/database/db.html#close\">close</a> the database after use.</p>\n","filename":"Titanium.Database.open-method","platforms":[{"pretty_name":"Android","since":"0.8","name":"android"},{"pretty_name":"iPhone","since":"0.8","name":"iphone"},{"pretty_name":"iPad","since":"0.8","name":"ipad"},{"pretty_name":"Windows","since":"4.1.0","name":"windowsphone"}],"inherits":null,"examples":"<h4 id=\"examples\"><a class=\"header-anchor\" href=\"#examples\" aria-hidden=\"true\">#</a> Examples</h4>\n<h5 id=\"open-a-database-from-internal-storage-ios\"><a class=\"header-anchor\" href=\"#open-a-database-from-internal-storage-ios\" aria-hidden=\"true\">#</a> Open a Database from Internal Storage (iOS)</h5>\n<p>A database, with a persistant name of <code>mydb1Installed</code> and located in the\ndefault database location on internal storage, is opened.</p>\n<pre><code>var db = Ti.Database.open('mydb1Installed');\n</code></pre>\n<p>A file extension of <code>sql</code> is added, and the file is opened from the\nfollowing location.</p>\n<p>On simulator</p>\n<ul>\n<li><code>/Users/&lt;user name&gt;/Library/Application Support/iPhone Simulator/&lt;iOS version&gt;/Applications/&lt;apple app id&gt;/Library/Private Documents/mydb1Installed.sql</code> (Titanium 1.8.0.1)</li>\n<li><code>/Users/&lt;user name&gt;/Library/Application Support/iPhone Simulator/&lt;iOS version&gt;/Applications/&lt;apple app id&gt;/Library/Application Support/database/mydb1Installed.sql</code> (earlier versions)</li>\n</ul>\n<p>On device</p>\n<ul>\n<li><code>/Applications/&lt;apple app id&gt;/Library/Private Documents/mydb1Installed.sql</code> (Titanium 1.8.0.1)</li>\n<li><code>/Applications/&lt;apple app id&gt;/Library/Application Support/database/mydb1Installed.sql</code> (earlier versions)</li>\n</ul>\n<h5 id=\"open-a-database-on-internal-storage-android\"><a class=\"header-anchor\" href=\"#open-a-database-on-internal-storage-android\" aria-hidden=\"true\">#</a> Open a Database on Internal Storage (Android)</h5>\n<p>A database, with a persistant name of <code>mydb1Installed</code> and located in the\ndefault database location on internal storage, is opened.</p>\n<p>var db1 = Ti.Database.open('mydb1Installed');</p>\n<p>Unlike on iOS, no file extension is added. The file is opened in\nthe following location.</p>\n<ul>\n<li><code>file:///data/data/appID/databases/mydb1Installed</code></li>\n</ul>\n<h5 id=\"open-a-database-on-external-storage-android\"><a class=\"header-anchor\" href=\"#open-a-database-on-external-storage-android\" aria-hidden=\"true\">#</a> Open a Database on External Storage (Android)</h5>\n<p>A database, with a filename of <code>mydb2Installed</code> and located at the\nabsolute path provided, is opened.</p>\n<pre><code>if (Ti.Platform.name === 'android' &amp;&amp; Ti.Filesystem.isExternalStoragePresent()) {\n  var db2 = Ti.Database.open(Ti.Filesystem.externalStorageDirectory + 'path' + Ti.Filesystem.separator + 'to' + Ti.Filesystem.separator + 'mydb2Installed');\n}\n</code></pre>\n<p>Unlike on iOS, no file extension is added. The file is copied to the\nabsolute path, as follows.</p>\n<ul>\n<li><code>file:///sdcard/path/to/mydb2Installed</code></li>\n</ul>\n<h5 id=\"open-a-database-in-the-shared-directory-of-an-application-group-ios\"><a class=\"header-anchor\" href=\"#open-a-database-in-the-shared-directory-of-an-application-group-ios\" aria-hidden=\"true\">#</a> Open a Database in the shared directory of an application group (iOS)</h5>\n<p>Opens a Database in a shared directory</p>\n<pre><code>var suiteDir = Ti.Filesystem.directoryForSuite('group.appc.Sharing');\nif (!suiteDir) {\n    logInApp('Suite Directory not found, check Entitlements.');\n    return;\n}\nvar path = suiteDir + 'TestDB';\nvar db = Ti.Database.open(path);\ndb.close();\n</code></pre>\n","parameters":[{"name":"dbName","deprecated":null,"summary":"The dbname previously passed to <Titanium.Database.install>. An absolute path \nto the file, including one that is constructed with a <Titanium.Filesystem> \nconstant or <Titanium.Filesystem.directoryForSuite> method, may be used.\n","description":null,"type":"String","optional":false,"filename":"Titanium.Database.open-method.dbName-param"}],"returns":{"type":"Titanium.Database.DB"}}],"extends":"Titanium.Module","properties":[],"platforms":[{"pretty_name":"Android","since":"0.8","name":"android"},{"pretty_name":"iPhone","since":"0.8","name":"iphone"},{"pretty_name":"iPad","since":"0.8","name":"ipad"},{"pretty_name":"Windows","since":"4.1.0","name":"windowsphone"}],"filename":null,"type":"module","subtype":null,"constants":[{"name":"FIELD_TYPE_DOUBLE","deprecated":null,"summary":"<p>Constant for requesting a column's value returned in double form.</p>\n","description":null,"filename":"Titanium.Database.FIELD_TYPE_DOUBLE-property","platforms":[{"pretty_name":"Android","since":"0.8","name":"android"},{"pretty_name":"iPhone","since":"0.8","name":"iphone"},{"pretty_name":"iPad","since":"0.8","name":"ipad"},{"pretty_name":"Windows","since":"4.1.0","name":"windowsphone"}],"inherits":null,"examples":[],"type":"Number","permission":"read-only"},{"name":"FIELD_TYPE_FLOAT","deprecated":null,"summary":"<p>Constant for requesting a column's value returned in float form.</p>\n","description":null,"filename":"Titanium.Database.FIELD_TYPE_FLOAT-property","platforms":[{"pretty_name":"Android","since":"0.8","name":"android"},{"pretty_name":"iPhone","since":"0.8","name":"iphone"},{"pretty_name":"iPad","since":"0.8","name":"ipad"},{"pretty_name":"Windows","since":"4.1.0","name":"windowsphone"}],"inherits":null,"examples":[],"type":"Number","permission":"read-only"},{"name":"FIELD_TYPE_INT","deprecated":null,"summary":"<p>Constant for requesting a column's value returned in integer form.</p>\n","description":null,"filename":"Titanium.Database.FIELD_TYPE_INT-property","platforms":[{"pretty_name":"Android","since":"0.8","name":"android"},{"pretty_name":"iPhone","since":"0.8","name":"iphone"},{"pretty_name":"iPad","since":"0.8","name":"ipad"},{"pretty_name":"Windows","since":"4.1.0","name":"windowsphone"}],"inherits":null,"examples":[],"type":"Number","permission":"read-only"},{"name":"FIELD_TYPE_STRING","deprecated":null,"summary":"<p>Constant for requesting a column's value returned in string form.</p>\n","description":null,"filename":"Titanium.Database.FIELD_TYPE_STRING-property","platforms":[{"pretty_name":"Android","since":"0.8","name":"android"},{"pretty_name":"iPhone","since":"0.8","name":"iphone"},{"pretty_name":"iPad","since":"0.8","name":"ipad"},{"pretty_name":"Windows","since":"4.1.0","name":"windowsphone"}],"inherits":null,"examples":[],"type":"Number","permission":"read-only"}]}